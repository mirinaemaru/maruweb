<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/main}">
<head>
    <title>ê³„ì¢Œ ë“±ë¡</title>
    <th:block layout:fragment="extra-css">
        <style>
                .form-page {
                    padding: 30px;
                    max-width: 800px;
                    margin: 0 auto;
                }
                .page-header {
                    margin-bottom: 40px;
                    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                    padding: 40px;
                    border-radius: 16px;
                    color: white;
                    box-shadow: 0 10px 40px rgba(102, 126, 234, 0.3);
                }
            [data-theme="dark"] .page-header {
                background: linear-gradient(135deg, #2a2d4a 0%, #1e2139 100%);
                box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
                border: 1px solid rgba(255, 255, 255, 0.1);
            }
                .page-header h1 {
                    font-size: 36px;
                    font-weight: 700;
                    margin-bottom: 10px;
                    display: flex;
                    align-items: center;
                    gap: 15px;
                }
                .form-container {
                    background: var(--bg-secondary);
                    border-radius: 16px;
                    padding: 40px;
                    box-shadow: 0 4px 20px rgba(0,0,0,0.08);
                    border: 1px solid rgba(0,0,0,0.04);
                }
                .form-group {
                    margin-bottom: 25px;
                    display: flex;
                    flex-direction: column;
                }
                .form-row {
                    display: flex;
                    align-items: center;
                    gap: 20px;
                }
                .form-group label {
                    font-weight: 600;
                    color: var(--text-primary);
                    font-size: 15px;
                    min-width: 180px;
                    width: 180px;
                    flex-shrink: 0;
                }
                .form-group label .required {
                    color: #dc3545;
                    margin-left: 4px;
                }
                .form-input-wrapper {
                    flex: 1;
                }
                .form-control {
                    width: 100%;
                    padding: 14px 18px;
                    border: 2px solid var(--border-color);
                    border-radius: 10px;
                    font-size: 15px;
                    transition: all 0.3s;
                    font-family: inherit;
                }
                .form-control:focus {
                    outline: none;
                    border-color: #667eea;
                    box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
                }
                .form-control:disabled {
                    background-color: var(--bg-tertiary);
                    cursor: not-allowed;
                }
                textarea.form-control {
                    resize: vertical;
                    min-height: 120px;
                }
                .form-actions {
                    display: flex;
                    gap: 15px;
                    margin-top: 35px;
                    padding-top: 25px;
                    border-top: 2px solid var(--border-color);
                }
                .btn {
                    padding: 14px 32px;
                    border: none;
                    border-radius: 10px;
                    font-size: 15px;
                    font-weight: 600;
                    cursor: pointer;
                    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                    text-decoration: none;
                    display: inline-block;
                }
                .btn-primary {
                    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                    color: white;
                    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
                }
                .btn-primary:hover {
                    transform: translateY(-3px);
                    box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
                }
                .btn-secondary {
                    background: #e8e8e8;
                    color: var(--text-secondary);
                }
                .btn-secondary:hover {
                    background: #d0d0d0;
                }
                .help-text {
                    font-size: 13px;
                    color: var(--text-muted);
                    margin-top: 6px;
                    margin-left: 200px;
                }
                .alert {
                    padding: 14px 20px;
                    border-radius: 10px;
                    margin-bottom: 25px;
                    font-weight: 500;
                }
                .alert-error {
                    background-color: #f8d7da;
                    color: #721c24;
                    border: 1px solid #f5c6cb;
                }
            </style>
    </th:block>
</head>
<body>
    <div layout:fragment="content">
        <div class="form-page">
                        <div class="page-header">
                            <h1 th:text="${account != null ? 'ğŸ’¼ ê³„ì¢Œ ìˆ˜ì •' : 'ğŸ’¼ ê³„ì¢Œ ë“±ë¡'}">ğŸ’¼ ê³„ì¢Œ ë“±ë¡</h1>
                            <p th:text="${account != null ? 'ê³„ì¢Œ ì •ë³´ë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.' : 'ìƒˆë¡œìš´ ê±°ë˜ ê³„ì¢Œë¥¼ ë“±ë¡í•©ë‹ˆë‹¤.'}">ìƒˆë¡œìš´ ê±°ë˜ ê³„ì¢Œë¥¼ ë“±ë¡í•©ë‹ˆë‹¤.</p>
                        </div>
        
                        <div th:if="${error}" class="alert alert-error" th:text="${error}">
                            ì˜¤ë¥˜ ë©”ì‹œì§€
                        </div>
        
                        <div class="form-container">
                            <form th:action="${account != null ? '/trading/accounts/' + account.accountId : '/trading/accounts'}"
                                  method="post">

                                <div class="form-group">
                                    <div class="form-row">
                                        <label for="broker">ì¦ê¶Œì‚¬ <span class="required">*</span></label>
                                        <div class="form-input-wrapper">
                                            <select id="broker"
                                                    name="broker"
                                                    class="form-control"
                                                    th:disabled="${account != null}"
                                                    required>
                                                <option value="">-- ì¦ê¶Œì‚¬ ì„ íƒ --</option>
                                                <option value="KIS" th:selected="${account?.broker == 'KIS'}">í•œêµ­íˆ¬ìì¦ê¶Œ (KIS)</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="help-text">ê±°ë˜í•  ì¦ê¶Œì‚¬ë¥¼ ì„ íƒí•˜ì„¸ìš”. (ìˆ˜ì • ë¶ˆê°€)</div>
                                </div>

                                <div class="form-group">
                                    <div class="form-row">
                                        <label for="cano">ê³„ì¢Œë²ˆí˜¸ (ì• 8ìë¦¬) <span class="required">*</span></label>
                                        <div class="form-input-wrapper">
                                            <input type="text"
                                                   id="cano"
                                                   name="cano"
                                                   class="form-control"
                                                   th:value="${account?.cano}"
                                                   th:disabled="${account != null}"
                                                   placeholder="ì˜ˆ: 50068923"
                                                   maxlength="8"
                                                   pattern="[0-9]{8}"
                                                   required>
                                        </div>
                                    </div>
                                    <div class="help-text">ê³„ì¢Œë²ˆí˜¸ ì• 8ìë¦¬ë¥¼ ì…ë ¥í•˜ì„¸ìš”. (ìˆ˜ì • ë¶ˆê°€)</div>
                                </div>

                                <div class="form-group">
                                    <div class="form-row">
                                        <label for="acntPrdtCd">ê³„ì¢Œìƒí’ˆì½”ë“œ (ë’¤ 2ìë¦¬) <span class="required">*</span></label>
                                        <div class="form-input-wrapper">
                                            <input type="text"
                                                   id="acntPrdtCd"
                                                   name="acntPrdtCd"
                                                   class="form-control"
                                                   th:value="${account?.acntPrdtCd}"
                                                   th:disabled="${account != null}"
                                                   placeholder="ì˜ˆ: 01"
                                                   maxlength="2"
                                                   pattern="[0-9]{2}"
                                                   required>
                                        </div>
                                    </div>
                                    <div class="help-text">ê³„ì¢Œë²ˆí˜¸ ë’¤ 2ìë¦¬ë¥¼ ì…ë ¥í•˜ì„¸ìš”. (ìˆ˜ì • ë¶ˆê°€)</div>
                                </div>

                                <div class="form-group">
                                    <div class="form-row">
                                        <label for="alias">ê³„ì¢Œ ë³„ì¹­ <span class="required">*</span></label>
                                        <div class="form-input-wrapper">
                                            <input type="text"
                                                   id="alias"
                                                   name="alias"
                                                   class="form-control"
                                                   th:value="${account?.alias}"
                                                   placeholder="ì˜ˆ: í…ŒìŠ¤íŠ¸ ê³„ì¢Œ"
                                                   required>
                                        </div>
                                    </div>
                                    <div class="help-text">ê³„ì¢Œë¥¼ ì‹ë³„í•  ìˆ˜ ìˆëŠ” ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”.</div>
                                </div>

                                <div class="form-group">
                                    <div class="form-row">
                                        <label for="environment">ê³„ì¢Œ íƒ€ì… <span class="required">*</span></label>
                                        <div class="form-input-wrapper">
                                            <select id="environment" name="environment" class="form-control" required>
                                                <option value="">-- ê³„ì¢Œ íƒ€ì… ì„ íƒ --</option>
                                                <option value="PAPER" th:selected="${account?.environment == 'PAPER'}">PAPER (ëª¨ì˜íˆ¬ì)</option>
                                                <option value="LIVE" th:selected="${account?.environment == 'LIVE'}">LIVE (ì‹¤ì „íˆ¬ì)</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="help-text">PAPERëŠ” ê°€ìƒ ìê¸ˆìœ¼ë¡œ í…ŒìŠ¤íŠ¸, LIVEëŠ” ì‹¤ì œ ìê¸ˆìœ¼ë¡œ ê±°ë˜í•©ë‹ˆë‹¤.</div>
                                </div>
        
                                <div class="form-actions">
                                    <button type="submit" class="btn btn-primary">
                                        <span th:text="${account != null ? 'ìˆ˜ì • ì™„ë£Œ' : 'ë“±ë¡í•˜ê¸°'}">ë“±ë¡í•˜ê¸°</span>
                                    </button>
                                    <a th:href="@{/trading/accounts}" class="btn btn-secondary">ì·¨ì†Œ</a>
                                </div>
                            </form>
                        </div>
                    </div>
    </div>
</body>
</html>
