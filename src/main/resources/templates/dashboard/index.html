<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/main}">
<head>
    <title>Dashboard</title>
    <th:block layout:fragment="extra-css">
    <link rel="stylesheet" th:href="@{/css/dashboard.css}">
    </th:block>
</head>
<body>
    <div layout:fragment="content">
<div class="container">
                    <header>
                        <div>
                            <h1>Dashboard</h1>
                            <p class="subtitle" th:text="'Today: ' + ${#temporals.format(today, 'yyyy-MM-dd (E)')}">Today</p>
                        </div>
                    </header>

                    <!-- Dashboard Grid -->
                    <div class="dashboard-grid">
                        <!-- Active Todos Card -->
                        <div class="dashboard-card">
                            <div class="card-header">
                                <h2>
                                    <span class="card-icon">üìù</span>
                                    Active Todos
                                </h2>
                                <span class="card-badge" th:text="${activeTodoCount}">0</span>
                            </div>
                            <div class="card-content">
                                <div th:if="${#lists.isEmpty(activeTodos)}" class="empty-state-small">
                                    No active todos
                                </div>
                                <ul class="dashboard-list" th:unless="${#lists.isEmpty(activeTodos)}">
                                    <li th:each="todo : ${activeTodos}" class="dashboard-list-item">
                                        <a th:href="@{/todos/{id}/edit(id=${todo.id})}" class="item-link">
                                            <span class="item-title" th:text="${todo.title}">Todo Title</span>
                                        </a>
                                        <small class="item-date" th:text="${#temporals.format(todo.createdAt, 'MM-dd')}">01-01</small>
                                    </li>
                                </ul>
                            </div>
                            <div class="card-footer">
                                <a th:href="@{/todos}" class="card-link">View All Todos ‚Üí</a>
                            </div>
                        </div>

                        <!-- Today's Events Card -->
                        <div class="dashboard-card">
                            <div class="card-header">
                                <h2>
                                    <span class="card-icon">üìÖ</span>
                                    Today's Events
                                </h2>
                                <span class="card-badge" th:text="${#lists.size(todayEvents)}">0</span>
                            </div>
                            <div class="card-content">
                                <div th:if="${#lists.isEmpty(todayEvents)}" class="empty-state-small">
                                    No events today
                                </div>
                                <ul class="dashboard-list" th:unless="${#lists.isEmpty(todayEvents)}">
                                    <li th:each="event : ${todayEvents}" class="dashboard-list-item">
                                        <span class="item-title" th:text="${event.title}">Event Title</span>
                                        <small class="item-time" th:if="${event.allDay != 'Y'}"
                                               th:text="${#temporals.format(event.startDateTime, 'HH:mm')}">10:00</small>
                                        <small class="item-time" th:if="${event.allDay == 'Y'}">All day</small>
                                    </li>
                                </ul>
                            </div>
                            <div class="card-footer">
                                <a th:href="@{/calendar}" class="card-link">View Calendar ‚Üí</a>
                            </div>
                        </div>

                        <!-- D-Day Card -->
                        <div class="dashboard-card">
                            <div class="card-header">
                                <h2>
                                    <span class="card-icon">‚è∞</span>
                                    D-Day
                                </h2>
                            </div>
                            <div class="card-content">
                                <div th:if="${#lists.isEmpty(upcomingDDays)}" class="empty-state-small">
                                    No upcoming D-Days
                                </div>
                                <ul class="dashboard-list" th:unless="${#lists.isEmpty(upcomingDDays)}">
                                    <li th:each="dday : ${upcomingDDays}" class="dashboard-list-item">
                                        <span class="item-title">
                                            <span th:text="${dday.icon}">üéØ</span>
                                            <span th:text="${dday.title}">D-Day Title</span>
                                        </span>
                                        <small class="item-dday" th:classappend="${dday.today} ? 'today' : ''" th:text="${dday.DDayDisplay}">D-30</small>
                                    </li>
                                </ul>
                            </div>
                            <div class="card-footer">
                                <a th:href="@{/dday}" class="card-link">View All D-Days ‚Üí</a>
                            </div>
                        </div>

                        <!-- Upcoming Events Card -->
                        <div class="dashboard-card">
                            <div class="card-header">
                                <h2>
                                    <span class="card-icon">üóìÔ∏è</span>
                                    Upcoming Events
                                </h2>
                            </div>
                            <div class="card-content">
                                <div th:if="${#lists.isEmpty(upcomingEvents)}" class="empty-state-small">
                                    No upcoming events
                                </div>
                                <ul class="dashboard-list" th:unless="${#lists.isEmpty(upcomingEvents)}">
                                    <li th:each="event : ${upcomingEvents}" class="dashboard-list-item">
                                        <span class="item-title" th:text="${event.title}">Event Title</span>
                                        <small class="item-date" th:text="${#temporals.format(event.startDateTime, 'MM-dd HH:mm')}">01-01 10:00</small>
                                    </li>
                                </ul>
                            </div>
                            <div class="card-footer">
                                <a th:href="@{/calendar}" class="card-link">View Calendar ‚Üí</a>
                            </div>
                        </div>

                        <!-- Quick Shortcuts Card -->
                        <div class="dashboard-card">
                            <div class="card-header">
                                <h2>
                                    <span class="card-icon">üîó</span>
                                    Quick Shortcuts
                                </h2>
                            </div>
                            <div class="card-content">
                                <div th:if="${#lists.isEmpty(shortcutCategories)}" class="empty-state-small">
                                    No shortcuts yet
                                </div>
                                <div th:unless="${#lists.isEmpty(shortcutCategories)}" class="shortcuts-preview">
                                    <div th:each="category : ${shortcutCategories}" class="shortcut-category-preview">
                                        <h4 th:text="${category.name}">Category</h4>
                                        <ul class="shortcut-links">
                                            <li th:each="shortcut : ${category.shortcuts}" th:if="${!shortcut.deleted.equals('Y')}">
                                                <a th:href="${shortcut.url}" target="_blank" th:text="${shortcut.name}">Link</a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="card-footer">
                                <a th:href="@{/shortcuts}" class="card-link">Manage Shortcuts ‚Üí</a>
                            </div>
                        </div>
                    </div>
                </div>
    </div>
</body>
</html>
