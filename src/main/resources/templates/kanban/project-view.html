<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/main}">
<head>
    <title>프로젝트 조회</title>
    <link rel="stylesheet" th:href="@{/css/kanban.css}">
</head>
<body>
<div layout:fragment="content">
    <div class="form-container">
        <div class="form-header">
            <h2>프로젝트 조회</h2>
            <a th:href="@{/kanban(projectId=${project.id})}" class="btn btn-secondary">
                <i class="fas fa-arrow-left"></i> 뒤로
            </a>
        </div>

        <!-- Project Info Card -->
        <div class="project-view-card">
            <!-- Basic Info -->
            <div class="view-section">
                <h3><i class="fas fa-info-circle"></i> 기본 정보</h3>
                <div class="view-field">
                    <label>프로젝트 이름</label>
                    <div class="view-value">
                        <span class="project-color-dot" th:style="'background-color: ' + ${project.color}"></span>
                        <strong th:text="${project.name}">Project Name</strong>
                    </div>
                </div>

                <div class="view-field">
                    <label>디렉토리 경로</label>
                    <div class="view-value">
                        <i class="fas fa-folder"></i>
                        <code th:text="${project.directoryPath}">~/projects/example</code>
                    </div>
                </div>

                <div class="view-field" th:if="${project.description}">
                    <label>설명</label>
                    <div class="view-value" th:text="${project.description}">
                        Project description
                    </div>
                </div>

                <div class="view-field">
                    <label>프로젝트 색상</label>
                    <div class="view-value">
                        <span class="color-preview" th:style="'background-color: ' + ${project.color}"></span>
                        <span th:text="${project.color}">#667eea</span>
                    </div>
                </div>

                <div class="view-field">
                    <label>표시 순서</label>
                    <div class="view-value" th:text="${project.displayOrder}">0</div>
                </div>
            </div>

            <!-- Task Statistics -->
            <div class="view-section">
                <h3><i class="fas fa-chart-bar"></i> 태스크 통계</h3>
                <div class="task-stats-grid">
                    <div class="stat-card total">
                        <div class="stat-icon"><i class="fas fa-tasks"></i></div>
                        <div class="stat-info">
                            <div class="stat-value" th:text="${totalTasks}">0</div>
                            <div class="stat-label">전체 태스크</div>
                        </div>
                    </div>
                    <div class="stat-card registered">
                        <div class="stat-icon"><i class="fas fa-inbox"></i></div>
                        <div class="stat-info">
                            <div class="stat-value" th:text="${registeredTasks}">0</div>
                            <div class="stat-label">등록</div>
                        </div>
                    </div>
                    <div class="stat-card waiting">
                        <div class="stat-icon"><i class="fas fa-clock"></i></div>
                        <div class="stat-info">
                            <div class="stat-value" th:text="${waitingTasks}">0</div>
                            <div class="stat-label">응답대기중</div>
                        </div>
                    </div>
                    <div class="stat-card in-progress">
                        <div class="stat-icon"><i class="fas fa-spinner"></i></div>
                        <div class="stat-info">
                            <div class="stat-value" th:text="${inProgressTasks}">0</div>
                            <div class="stat-label">진행중</div>
                        </div>
                    </div>
                    <div class="stat-card completed">
                        <div class="stat-icon"><i class="fas fa-check-circle"></i></div>
                        <div class="stat-info">
                            <div class="stat-value" th:text="${completedTasks}">0</div>
                            <div class="stat-label">완료</div>
                        </div>
                    </div>
                </div>

                <!-- Progress Bar -->
                <div class="progress-section" th:if="${totalTasks > 0}">
                    <label>완료율</label>
                    <div class="progress-bar-container">
                        <div class="progress-bar"
                             th:style="'width: ' + (${completedTasks} * 100 / ${totalTasks}) + '%'">
                        </div>
                    </div>
                    <div class="progress-text">
                        <span th:text="${#numbers.formatDecimal(${completedTasks} * 100 / ${totalTasks}, 1, 1)}">0.0</span>%
                        (<span th:text="${completedTasks}">0</span> / <span th:text="${totalTasks}">0</span>)
                    </div>
                </div>
            </div>

            <!-- Metadata -->
            <div class="view-section">
                <h3><i class="fas fa-calendar"></i> 날짜 정보</h3>
                <div class="view-field">
                    <label>생성일</label>
                    <div class="view-value" th:text="${#temporals.format(project.createdAt, 'yyyy-MM-dd HH:mm')}">
                        2024-01-07 10:00
                    </div>
                </div>
                <div class="view-field" th:if="${project.updatedAt != null}">
                    <label>최종 수정</label>
                    <div class="view-value" th:text="${#temporals.format(project.updatedAt, 'yyyy-MM-dd HH:mm')}">
                        2024-01-07 15:00
                    </div>
                </div>
            </div>
        </div>

        <!-- Actions -->
        <div class="view-actions">
            <a th:href="@{/kanban(projectId=${project.id})}" class="btn btn-primary">
                <i class="fas fa-clipboard-list"></i> 칸반 보드로 이동
            </a>
            <a th:href="@{/kanban/projects/{id}/edit(id=${project.id})}" class="btn btn-secondary">
                <i class="fas fa-edit"></i> 수정
            </a>
            <a th:href="@{/kanban}" class="btn btn-secondary">
                <i class="fas fa-arrow-left"></i> 목록으로
            </a>
        </div>
    </div>
</div>
</body>
</html>
