# Trading 모듈 테스트 계획서

> 작성일: 2026-01-13
> 버전: 2.0
> 변경사항: 신규 테스트 영역 추가, 통합 테스트 시나리오 추가, API 연동 테스트 강화

---

## 1. 개요

### 1.1 테스트 범위
Trading 모듈의 전체 기능에 대한 기능 테스트, 통합 테스트, API 연동 테스트

### 1.2 테스트 환경
| 항목 | 값 |
|------|-----|
| 서버 | http://localhost:8090 |
| Trading API | http://localhost:8099 |
| 데이터베이스 | MariaDB (maruweb) |
| 브라우저 | Chrome, Firefox, Safari |

### 1.3 사전 조건
- 서버 실행 상태 확인 (`./run-maruweb.sh`)
- Trading System API 실행 상태 확인
- 테스트 계좌 및 데이터 준비

### 1.4 테스트 케이스 요약 (v2.0)
| 카테고리 | 개수 | 변경 |
|---------|------|------|
| 대시보드 (TC-DASH) | 5 | - |
| 계좌 관리 (TC-ACC) | 7 | +1 |
| 주문/체결 (TC-ORD) | 10 | +2 |
| 포지션 (TC-POS) | 4 | - |
| 전략 (TC-STR) | 12 | +1 |
| 백테스트 (TC-BT) | 12 | +4 |
| 리스크 (TC-RISK) | 12 | +4 |
| 기타 (TC-ETC) | 8 | - |
| 실행 이력 (TC-EXEC) | 5 | 신규 |
| 데모 (TC-DEMO) | 5 | 신규 |
| 통합 (TC-INT) | 8 | 신규 |
| API 연동 (TC-API) | 6 | 신규 |
| **합계** | **79** | **+32** |

---

## 2. 테스트 케이스

### 2.1 대시보드 (TC-DASH)

| ID | 테스트 케이스 | 테스트 절차 | 예상 결과 | 우선순위 | 자동화 |
|----|--------------|-------------|----------|---------|--------|
| TC-DASH-001 | 대시보드 페이지 접근 | `/trading` 또는 `/trading/dashboard` 접속 | 페이지 정상 로드, 시스템 상태 표시 | High | O |
| TC-DASH-002 | Trading API 연결 상태 확인 | 대시보드에서 연결 상태 확인 | 연결/비연결 상태 아이콘 표시 | High | O |
| TC-DASH-003 | 계좌 요약 정보 표시 | 대시보드 계좌 섹션 확인 | 총 잔고, 손익 정보 표시 | High | O |
| TC-DASH-004 | 최근 주문/체결 목록 | 대시보드 하단 섹션 확인 | 최근 데이터 5~10건 표시 | Medium | O |
| TC-DASH-005 | 다크모드 전환 | 테마 토글 클릭 | 다크모드 스타일 정상 적용 | Low | O |

### 2.2 계좌 관리 (TC-ACC)

| ID | 테스트 케이스 | 테스트 절차 | 예상 결과 | 우선순위 | 자동화 |
|----|--------------|-------------|----------|---------|--------|
| TC-ACC-001 | 계좌 목록 조회 | `/trading/accounts` 접속 | 모든 계좌 목록 테이블 표시 | High | O |
| TC-ACC-002 | 계좌 상세 정보 조회 | 계좌 목록에서 계좌 클릭 | 계좌 상세 페이지 로드 | High | O |
| TC-ACC-003 | 신규 계좌 등록 | 신규 계좌 버튼 → 폼 입력 → 저장 | 폼 제출 후 목록에 추가 | High | - |
| TC-ACC-004 | 계좌 정보 수정 | 계좌 상세 → 수정 → 저장 | 수정 사항 정상 저장 | Medium | - |
| TC-ACC-005 | 잔고 조회 | `/trading/balances` 접속 | 계좌별 잔고 정보 표시 | High | O |
| TC-ACC-006 | 계좌 삭제 | 계좌 상세 → 삭제 버튼 | 삭제 확인 후 목록에서 제거 | Medium | - |
| TC-ACC-007 | 계좌 상태 변경 | 계좌 활성화/비활성화 토글 | 상태 변경 후 즉시 반영 | High | - |

### 2.3 주문/체결 관리 (TC-ORD)

| ID | 테스트 케이스 | 테스트 절차 | 예상 결과 | 우선순위 | 자동화 |
|----|--------------|-------------|----------|---------|--------|
| TC-ORD-001 | 주문 목록 조회 | `/trading/orders` 접속 | 전체 주문 목록 표시 | High | O |
| TC-ORD-002 | 주문 상태별 필터링 | 상태 필터 선택 (대기/체결/취소) | 필터 적용된 결과만 표시 | High | O |
| TC-ORD-003 | 주문 상세 조회 | 주문 목록에서 주문 클릭 | 주문 상세 정보 모달/페이지 표시 | High | O |
| TC-ORD-004 | 체결 내역 조회 | `/trading/fills` 접속 | 체결 목록 표시 | High | O |
| TC-ORD-005 | 체결 상세 조회 | 체결 목록에서 항목 클릭 | 체결 상세 정보 표시 | Medium | O |
| TC-ORD-006 | 날짜 범위 필터링 | 시작일/종료일 설정 후 조회 | 기간 내 데이터만 표시 | Medium | O |
| TC-ORD-007 | 종목 코드 필터링 | 종목 코드 입력 후 조회 | 해당 종목만 표시 | Medium | O |
| TC-ORD-008 | Excel 내보내기 | 내보내기 버튼 클릭 | 엑셀 파일 다운로드 | Low | - |
| TC-ORD-009 | 주문 취소 | 대기 중 주문 → 취소 버튼 | 주문 취소 처리, 상태 변경 | High | - |
| TC-ORD-010 | 주문 수정 | 대기 중 주문 → 수정 버튼 | 가격/수량 수정 처리 | High | - |

### 2.4 포지션 관리 (TC-POS)

| ID | 테스트 케이스 | 테스트 절차 | 예상 결과 | 우선순위 | 자동화 |
|----|--------------|-------------|----------|---------|--------|
| TC-POS-001 | 포지션 목록 조회 | `/trading/positions` 접속 | 현재 보유 포지션 표시 | High | O |
| TC-POS-002 | 포지션 상세 조회 | 포지션 목록에서 항목 클릭 | 포지션 상세 정보 표시 | High | O |
| TC-POS-003 | 미실현 손익 표시 | 포지션 목록 손익 컬럼 확인 | 현재가 기준 손익 계산 표시 | High | O |
| TC-POS-004 | 포지션 종목별 필터 | 종목 필터 선택 | 선택 종목 포지션만 표시 | Medium | O |

### 2.5 전략 관리 (TC-STR)

| ID | 테스트 케이스 | 테스트 절차 | 예상 결과 | 우선순위 | 자동화 |
|----|--------------|-------------|----------|---------|--------|
| TC-STR-001 | 전략 목록 조회 | `/trading/strategies` 접속 | 모든 전략 목록 표시 | High | O |
| TC-STR-002 | 전략 생성 (GENERAL) | 새 전략 → GENERAL 선택 → 저장 | 일반 전략 생성 완료 | High | - |
| TC-STR-003 | 전략 생성 (AUTO_TRADING) | 새 전략 → AUTO_TRADING 선택 → 저장 | 자동매매 전략 생성 완료 | High | - |
| TC-STR-004 | 전략 수정 | 전략 상세 → 수정 → 저장 | 수정 사항 정상 저장 | High | - |
| TC-STR-005 | 전략 삭제 | 전략 상세 → 삭제 버튼 | 소프트 삭제 처리 (deleted='Y') | High | - |
| TC-STR-006 | 자동매매 설정 | `/trading/strategies/{id}/trading` → 조건 입력 → 저장 | 매매 조건 저장 완료 | High | - |
| TC-STR-007 | 전략 동기화 | Sync 버튼 클릭 | Trading API에 동기화, syncStatus 업데이트 | High | - |
| TC-STR-008 | 전략 활성화 | Activate 버튼 클릭 | tradingStatus=ACTIVE, activatedAt 설정 | High | - |
| TC-STR-009 | 전략 비활성화 | Deactivate 버튼 클릭 | tradingStatus=INACTIVE | High | - |
| TC-STR-010 | 전략 통계 조회 | `/trading/strategies/{id}/statistics` 접속 | 전략 통계 정보 표시 | Medium | O |
| TC-STR-011 | 카테고리 관리 | 카테고리 추가/삭제 | 카테고리 CRUD 정상 동작 | Medium | - |
| TC-STR-012 | 외부 API 전략 목록 조회 | 전략 목록에서 외부 API 탭 선택 | Trading System API의 전략 표시 | High | O |

### 2.6 백테스트/최적화 (TC-BT)

| ID | 테스트 케이스 | 테스트 절차 | 예상 결과 | 우선순위 | 자동화 |
|----|--------------|-------------|----------|---------|--------|
| TC-BT-001 | 백테스트 목록 조회 | `/trading/backtests` 접속 | 백테스트 결과 목록 표시 | High | O |
| TC-BT-002 | 백테스트 실행 | `/trading/backtests/run` → 설정 → 실행 | 백테스트 시작 및 진행 표시 | High | - |
| TC-BT-003 | 백테스트 상세 조회 | 백테스트 목록에서 항목 클릭 | 결과 상세 (수익률, MDD 등) 표시 | High | O |
| TC-BT-004 | 백테스트 거래 내역 | 백테스트 상세 → 거래 탭 | 시뮬레이션 거래 목록 표시 | Medium | O |
| TC-BT-005 | 전략 최적화 실행 | `/trading/optimization` → 파라미터 설정 → 실행 | 최적화 파라미터 탐색 결과 | High | - |
| TC-BT-006 | Walk-Forward 분석 | `/trading/walk-forward-analysis` 접속 | 분석 결과 표시 | Medium | - |
| TC-BT-007 | 포트폴리오 백테스트 | `/trading/portfolio-backtest` 접속 | 다중 전략 백테스트 결과 | Medium | - |
| TC-BT-008 | 데모 백테스트 | `/trading/demo-backtest` 접속 | 데모 모드 정상 동작 | Low | O |
| TC-BT-009 | 포트폴리오 백테스트 설정 | 다중 전략 선택 → 가중치 설정 → 실행 | 포트폴리오 수준 성과 분석 | High | - |
| TC-BT-010 | Walk-Forward 기간 설정 | 최적화/검증 기간 비율 설정 | 과적합 검증 결과 표시 | Medium | - |
| TC-BT-011 | 백테스트 결과 비교 | 복수 백테스트 선택 → 비교 | 비교 차트/테이블 표시 | Medium | O |
| TC-BT-012 | 백테스트 관리자 뷰 | `/trading/backtests-admin` 접속 | 전체 백테스트 관리 뷰 표시 | Low | O |

### 2.7 리스크/분석 (TC-RISK)

| ID | 테스트 케이스 | 테스트 절차 | 예상 결과 | 우선순위 | 자동화 |
|----|--------------|-------------|----------|---------|--------|
| TC-RISK-001 | 성과 분석 조회 | `/trading/performance` 접속 | 성과 지표 차트/테이블 표시 | High | O |
| TC-RISK-002 | VaR 분석 | `/trading/risk/var` 접속 | VaR 계산 결과 표시 | Medium | O |
| TC-RISK-003 | 상관관계 분석 | `/trading/risk/correlation` 접속 | 상관관계 매트릭스 표시 | Medium | O |
| TC-RISK-004 | 리스크 규칙 목록 | `/trading/risk-rules` 접속 | 리스크 규칙 목록 표시 | High | O |
| TC-RISK-005 | 리스크 규칙 생성 | 새 규칙 → 조건 입력 → 저장 | 새 규칙 생성 완료 | High | - |
| TC-RISK-006 | 리스크 규칙 수정 | 규칙 상세 → 수정 → 저장 | 규칙 수정 저장 완료 | Medium | - |
| TC-RISK-007 | 킬 스위치 조회 | `/trading/kill-switch` 접속 | 킬 스위치 현재 상태 표시 | High | O |
| **TC-RISK-008** | **킬 스위치 활성화** | 킬 스위치 활성화 버튼 클릭 | **모든 자동매매 즉시 중단** | **Critical** | - |
| TC-RISK-009 | 리스크 규칙 토글 | 규칙 활성화/비활성화 토글 | 즉시 상태 변경, 매매에 반영 | High | - |
| TC-RISK-010 | 복합 조건 규칙 생성 | AND/OR 조건 조합 규칙 생성 | 복합 조건 정상 저장/동작 | Medium | - |
| TC-RISK-011 | 규칙 우선순위 설정 | 규칙 순서 드래그/드롭 변경 | 우선순위 순서대로 적용 | Medium | - |
| TC-RISK-012 | 규칙 발동 이력 조회 | 규칙 상세 → 이력 탭 | 규칙 발동 기록 표시 | Low | O |

### 2.8 기타 기능 (TC-ETC)

| ID | 테스트 케이스 | 테스트 절차 | 예상 결과 | 우선순위 | 자동화 |
|----|--------------|-------------|----------|---------|--------|
| TC-ETC-001 | 종목 목록 조회 | `/trading/instruments` 접속 | 종목 목록 표시 | High | O |
| TC-ETC-002 | 종목 상세 조회 | 종목 목록에서 항목 클릭 | 종목 상세 정보 표시 | Medium | O |
| TC-ETC-003 | 알림 설정 조회 | `/trading/notifications/settings` 접속 | 알림 설정 페이지 로드 | Medium | O |
| TC-ETC-004 | 알림 설정 수정 | 알림 설정 변경 → 저장 | 알림 설정 저장 완료 | Medium | - |
| TC-ETC-005 | 알림 이력 조회 | `/trading/notifications/history` 접속 | 알림 발송 내역 표시 | Low | O |
| TC-ETC-006 | 알림 테스트 발송 | `/trading/notifications/test` → 발송 | 테스트 알림 발송 완료 | Low | - |
| TC-ETC-007 | 헬스 체크 | `/trading/health-check` 접속 | API 연결 상태 표시 | High | O |
| TC-ETC-008 | 데모 시나리오 | `/trading/demo-scenarios` 접속 | 데모 기능 정상 동작 | Low | O |

### 2.9 실행 이력 (TC-EXEC) - 신규

| ID | 테스트 케이스 | 테스트 절차 | 예상 결과 | 우선순위 | 자동화 |
|----|--------------|-------------|----------|---------|--------|
| TC-EXEC-001 | 실행 이력 페이지 접근 | `/trading/execution-history` 접속 | 실행 이력 목록 표시 | High | O |
| TC-EXEC-002 | 날짜 범위 필터링 | 시작일/종료일 선택 후 조회 | 기간 내 실행 이력만 표시 | Medium | O |
| TC-EXEC-003 | 계좌별 필터링 | 계좌 선택 후 조회 | 선택 계좌의 이력만 표시 | Medium | O |
| TC-EXEC-004 | 상세 실행 정보 조회 | 이력 항목 클릭 | 실행 타임라인 상세 표시 | Medium | O |
| TC-EXEC-005 | 실행 이력 Excel 내보내기 | 내보내기 버튼 클릭 | 엑셀 파일 다운로드 | Low | - |

### 2.10 데모/시뮬레이션 (TC-DEMO) - 신규

| ID | 테스트 케이스 | 테스트 절차 | 예상 결과 | 우선순위 | 자동화 |
|----|--------------|-------------|----------|---------|--------|
| TC-DEMO-001 | 데모 시나리오 목록 조회 | `/trading/demo-scenarios` 접속 | 시나리오 목록 표시 | Medium | O |
| TC-DEMO-002 | 데모 백테스트 실행 | `/trading/demo-backtest` → 실행 | 데모 데이터로 백테스트 완료 | Medium | - |
| TC-DEMO-003 | 데모 신호 생성 | `/trading/demo-signal` → 신호 생성 | 테스트 신호 생성 완료 | Low | - |
| TC-DEMO-004 | 최적화 데모 실행 | `/trading/optimization-demo` → 실행 | 데모 최적화 결과 표시 | Low | - |
| TC-DEMO-005 | 데모 데이터 확인 | 데모 모드에서 데이터 조회 | 실제 데이터와 구분되는 데모 데이터 표시 | Low | O |

### 2.11 통합 테스트 (TC-INT) - 신규

| ID | 테스트 케이스 | 테스트 절차 | 예상 결과 | 우선순위 | 자동화 |
|----|--------------|-------------|----------|---------|--------|
| **TC-INT-001** | **전략 전체 라이프사이클** | 전략 생성 → 조건 설정 → 동기화 → 활성화 → 비활성화 → 삭제 | 각 단계 정상 완료, 상태 전이 정확 | **Critical** | - |
| **TC-INT-002** | **주문 → 체결 → 포지션 흐름** | 주문 생성 → 체결 대기 → 체결 완료 → 포지션 반영 확인 | 데이터 정합성 유지, 손익 계산 정확 | **Critical** | - |
| **TC-INT-003** | **리스크 규칙 → 킬스위치 연동** | 리스크 규칙 설정 → 조건 충족 → 킬스위치 자동 발동 | 자동매매 즉시 중단, 알림 발송 | **Critical** | - |
| TC-INT-004 | 알림 전체 흐름 | 알림 설정 → 이벤트 발생 → 알림 발송 → 이력 확인 | 설정된 채널로 알림 수신 | High | - |
| TC-INT-005 | 백테스트 → 실거래 전환 | 백테스트 완료 → 전략 복제 → 실거래 설정 | 설정 값 정상 이전 | High | - |
| TC-INT-006 | 다중 계좌 동시 운영 | 복수 계좌에 각각 전략 활성화 | 계좌별 독립 운영 | Medium | - |
| TC-INT-007 | 세션 만료 후 동작 | 장시간 미사용 후 액션 | 적절한 재인증 처리 | Medium | - |
| TC-INT-008 | 다크모드 전체 페이지 검증 | 모든 페이지 다크모드 전환 | 모든 UI 요소 다크모드 스타일 적용 | Low | O |

### 2.12 API 연동 테스트 (TC-API) - 신규

| ID | 테스트 케이스 | 테스트 절차 | 예상 결과 | 우선순위 | 자동화 |
|----|--------------|-------------|----------|---------|--------|
| **TC-API-001** | **API 연결 상태 확인** | 헬스체크 엔드포인트 호출 | 연결 상태 정확히 표시 | **Critical** | O |
| TC-API-002 | API 타임아웃 처리 | API 응답 지연 상황 시뮬레이션 | 타임아웃 메시지 표시, 재시도 옵션 | High | - |
| TC-API-003 | API 오류 응답 처리 | 4xx/5xx 응답 발생 | 사용자 친화적 오류 메시지 표시 | High | O |
| TC-API-004 | API 재연결 동작 | API 연결 끊김 후 재연결 | 자동 재연결 또는 수동 재연결 옵션 | High | - |
| TC-API-005 | API 버전 호환성 | 다른 버전 API와 연동 | 버전 불일치 시 경고 표시 | Medium | - |
| TC-API-006 | API 요청 속도 제한 | 빠른 연속 요청 발생 | Rate limit 처리, 재시도 로직 | Low | - |

---

## 3. 테스트 우선순위 요약

| 우선순위 | 케이스 수 | 비고 |
|---------|----------|------|
| Critical | 5 | 킬 스위치, 통합 흐름, API 연결 |
| High | 32 | 핵심 기능 |
| Medium | 28 | 주요 기능 |
| Low | 14 | 부가 기능 |
| **합계** | **79** | v1.0 대비 +32 |

---

## 4. 테스트 체크리스트

### 4.1 스모크 테스트 (최소 검증) - 5분 내 완료
- [ ] 대시보드 페이지 로드 (TC-DASH-001)
- [ ] Trading API 연결 상태 확인 (TC-API-001)
- [ ] 계좌 목록 조회 (TC-ACC-001)
- [ ] 전략 목록 조회 (TC-STR-001)
- [ ] 헬스 체크 페이지 확인 (TC-ETC-007)

### 4.2 Critical 테스트 (필수 통과)
- [ ] 킬 스위치 활성화 (TC-RISK-008)
- [ ] 전략 전체 라이프사이클 (TC-INT-001)
- [ ] 주문 → 체결 → 포지션 흐름 (TC-INT-002)
- [ ] 리스크 규칙 → 킬스위치 연동 (TC-INT-003)
- [ ] API 연결 상태 확인 (TC-API-001)

### 4.3 기능 테스트 (전체 검증)
- [ ] 모든 High 우선순위 케이스 통과 (32개)
- [ ] 모든 Medium 우선순위 케이스 통과 (28개)
- [ ] 모든 Low 우선순위 케이스 통과 (14개)

### 4.4 회귀 테스트 (변경 후 검증)
- [ ] 변경된 기능 관련 테스트 케이스 재실행
- [ ] 연관 기능 영향도 확인
- [ ] Critical 테스트 전체 재실행

### 4.5 자동화 테스트 (CI/CD 연동)
자동화 가능한 테스트: 45개 (O 표시)
- 페이지 로드 검증
- 데이터 조회 검증
- UI 요소 렌더링 검증

---

## 5. 테스트 시나리오 (E2E)

### 5.1 시나리오 1: 신규 사용자 온보딩
```
1. 대시보드 접속 → API 연결 상태 확인
2. 계좌 등록 → 잔고 확인
3. 전략 생성 (AUTO_TRADING)
4. 자동매매 조건 설정
5. 전략 동기화 → 활성화
6. 모니터링 대시보드 확인
```

### 5.2 시나리오 2: 백테스트 기반 전략 개발
```
1. 전략 생성 (GENERAL)
2. 백테스트 실행 → 결과 분석
3. 전략 최적화 실행
4. Walk-Forward 분석으로 과적합 검증
5. 전략 타입 AUTO_TRADING으로 변경
6. 실거래 설정 → 활성화
```

### 5.3 시나리오 3: 리스크 관리 흐름
```
1. 리스크 규칙 생성 (일일 손실 한도)
2. 전략 활성화 → 매매 시작
3. 손실 한도 도달
4. 규칙 발동 → 알림 발송
5. 킬스위치 자동/수동 활성화
6. 모든 자동매매 중단 확인
```

---

## 6. 테스트 결과 기록

| 테스트 ID | 결과 | 테스터 | 테스트 일시 | 비고 |
|-----------|------|--------|------------|------|
| | | | | |

---

## 7. 이슈 트래킹

| 이슈 ID | 관련 테스트 | 설명 | 심각도 | 상태 | 담당자 |
|---------|------------|------|--------|------|--------|
| | | | | | |

---

## 8. 변경 이력

| 버전 | 날짜 | 변경 내용 |
|------|------|----------|
| 1.0 | 2026-01-13 | 초기 버전 (47개 테스트 케이스) |
| 2.0 | 2026-01-13 | 32개 테스트 케이스 추가, 통합/API 테스트 신설, Critical 등급 추가 |
